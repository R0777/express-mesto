{"version":3,"sources":["components/Header.js","components/UserProfile.js","components/Card.js","components/ImagePopup.js","contexts/CurrentUserContext.js","contexts/CurrentCardContext.js","components/Main.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/Footer.js","utils/api.js","components/App.js","index.js","images/svg/logo.svg"],"names":["Header","className","src","logo","alt","UserProfile","props","userAvatar","onClick","avatar","title","userName","type","profile","userDescription","addPlace","Card","onCardClick","owner","myId","onCardDelete","onCardLike","undefined","cardLiked","like","ImagePopup","card","id","onClose","CurrentUserContext","React","createContext","CurrentCardContext","Main","currentUserContext","useContext","items","map","item","link","_id","name","likes","length","find","elem","onEditAvatar","onEditProfile","onAddPlace","about","key","PopupWithForm","isOpen","noValidate","onSubmit","isClose","children","buttonText","EditAvatarPopup","avatarLink","useRef","e","preventDefault","onUpdateAvatar","current","value","ref","placeholder","required","EditProfilePopup","useState","setName","description","setDescription","currentUser","useEffect","onUpdateUser","onChange","target","minLength","maxLength","AddPlacePopup","place","setPlace","setLink","Footer","api","url","headers","this","_url","_headers","res","ok","json","Promise","reject","Error","status","fetch","then","_getResponseData","method","body","JSON","stringify","el","avalink","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isTrashOpen","setIsTrashOpen","isSelectedCard","setIsSelectedCard","setCurrentUser","currentCards","setCurrentCards","all","getProfile","getInitialCards","catch","err","console","log","closeAllPopups","Provider","some","i","unLike","newCard","newCards","c","addLike","onTrash","deleteCard","deletedCard","filter","setProfile","setCard","profileAvatar","ReactDOM","render","StrictMode","document","querySelector","module","exports"],"mappings":"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","file":"static/js/main.67bd3bb8.chunk.js","sourcesContent":["import React from 'react';\r\nimport logo from '../images/svg/logo.svg';\r\n\r\nconst Header = () => {\r\n    return (\r\n        <header className=\"header\"><img src={logo} alt=\"логотип Mesto Russia\" className=\"header__logo\"/></header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nconst UserProfile = (props) => {\r\n    return (\r\n        <section className=\"profile\">\r\n            <div className=\"profile__avatar\"><img\r\n                src={props.userAvatar}\r\n                alt=\"Ваше фото\"\r\n                className=\"profile__avatar-img\"\r\n                onClick={props.avatar}/></div>\r\n            <div className=\"profile__info\">\r\n                <h1 className=\"profile__name\" title={props.userName}>{props.userName}</h1>\r\n                <button className=\"profile__edit\" type=\"button\" onClick={props.profile}></button>\r\n                <p className=\"profile__job\" title={props.userDescription}>{props.userDescription}</p>\r\n            </div>\r\n            <button className=\"profile__button\" type=\"button\" onClick={props.addPlace}></button>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default UserProfile;","import React from 'react';\r\n\r\nconst Card = (props) => {\r\n\r\n    function handleCardClick() {\r\n        props.onCardClick(props)\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(props)\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props)\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"template__place\">\r\n            <figure className=\"card\">\r\n                <img\r\n                    src={props.src}\r\n                    alt={props.alt}\r\n                    className=\"card__pic\"\r\n                    onClick={handleCardClick}/>\r\n                <button\r\n                    className={`card__trash ${ (props.owner === props.myId) && 'active'}`}\r\n                    onClick={handleDeleteClick}></button>\r\n                <figcaption className=\"card__text\">\r\n                    <h4 className=\"card__name\">{props.title}</h4>\r\n                    <div className=\"card__like-block\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={handleLikeClick}\r\n                            className={`card__like ${ (props.cardLiked !== undefined) && 'card__like card__like_active'}`}></button>\r\n                        <p className=\"card__like-number\">{props.like}</p>\r\n                    </div>\r\n                </figcaption>\r\n            </figure>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nconst ImagePopup = (props) => {\r\n    return (\r\n        <section className={`popup ${props.card && 'active'}`} id=\"bigimg\">\r\n            <figure className=\"popup__block-big\">\r\n                <button className=\"popup__close\" type=\"button\" onClick={props.onClose}></button>\r\n                <img\r\n                    src={props.card && props.card.src}\r\n                    alt={props.card && props.card.title}\r\n                    className=\"popup__pic\"/>\r\n                <figcaption className=\"popup__text\">\r\n                    <p className=\"popup__place\">{props.card && props.card.title}</p>\r\n                </figcaption>\r\n            </figure>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nexport const CurrentCardContext = React.createContext();","import React from 'react';\r\nimport UserProfile from './UserProfile';\r\nimport Card from './Card';\r\nimport ImagePopup from './ImagePopup';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\r\nimport {CurrentCardContext} from '../contexts/CurrentCardContext'\r\n\r\nconst Main = (props) => {\r\n\r\n    const currentUserContext = React.useContext(CurrentUserContext);\r\n    const currentCardContext = React.useContext(CurrentCardContext);\r\n\r\n    const items = currentCardContext.map(item => ({\r\n        src: item.link,\r\n        id: item._id,\r\n        owner: item.owner._id,\r\n        alt: item.name,\r\n        likes: item.likes,\r\n        title: item.name,\r\n        like: item.likes.length,\r\n        cardLiked: item\r\n            .likes\r\n            .find((elem) => elem._id === currentUserContext._id)\r\n    }))\r\n\r\n    return (\r\n        <main>\r\n\r\n            <UserProfile\r\n                avatar={props.onEditAvatar}\r\n                profile={props.onEditProfile}\r\n                addPlace={props.onAddPlace}\r\n                userName={currentUserContext.name}\r\n                userDescription={currentUserContext.about}\r\n                userAvatar={currentUserContext.avatar}/>\r\n\r\n            <section className=\"places\">\r\n                {items.map(card => <Card key={card.id} myId={currentUserContext._id} {...card} {...props}/>)}\r\n            </section>\r\n\r\n            <ImagePopup card={props.card} onClose={props.onClose}/>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nconst PopupWithForm = (props) => {\r\n\r\n    return (\r\n        <section className={`popup ${props.isOpen && 'active'}`} id={props.id}>\r\n            <form className=\"popup__block\" noValidate onSubmit={props.onSubmit}>\r\n                <button className=\"popup__close\" type=\"button\" onClick={props.isClose}></button>\r\n                <h4 className=\"popup__title\">{props.title}</h4>\r\n                {props.children}\r\n                <button className=\"popup__save\" type=\"submit\">{props.buttonText}</button>\r\n            </form>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nconst EditAvatarPopup = (props) => {\r\n\r\n    const avatarLink = React.useRef(null);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({avatar: avatarLink.current.value});\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            title={props.title}\r\n            id={props.id}\r\n            buttonText={props.buttonText}\r\n            isOpen={props.isOpen}\r\n            isClose={props.isClose}\r\n            onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input\r\n                    ref={avatarLink}\r\n                    type=\"url\"\r\n                    className=\"popup__input popup__input_place\"\r\n                    id='avatar-input'\r\n                    name=\"avatar\"\r\n                    placeholder=\"Ссылка на картинку\"\r\n                    required/>\r\n                <span className='popup__input-error' id='avatar-input-error'></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm'\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\r\n\r\nconst EditProfilePopup = (props) => {\r\n\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    React.useEffect(() => {\r\n        if(props.isOpen) {\r\n        setName('')\r\n        setDescription('')\r\n        setName(currentUser.name)\r\n        setDescription(currentUser.about)\r\n    }}, [currentUser, props.isOpen])\r\n\r\n    function handleChangeDescription(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateUser({\r\n          name: name, \r\n          about: description\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            title=\"Новое место\"\r\n            id={props.id}\r\n            isOpen={props.isOpen}\r\n            buttonText={props.buttonText}\r\n            isClose={props.isClose}\r\n            onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"popup__input popup__input_name\"\r\n                    id='name-input'\r\n                    name={\"name\"}\r\n                    placeholder=\"Ваше Имя\"\r\n                    onChange={handleChangeName}\r\n                    value={name}\r\n                    minLength=\"2\"\r\n                    maxLength=\"40\"\r\n                    required/>\r\n                <span className='popup__input-error' id='name-input-error'></span>\r\n            </label>\r\n            <label className=\"popup__field\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"popup__input popup__input_job\"\r\n                    id='job-input'\r\n                    name={\"about\"}\r\n                    onChange={handleChangeDescription}\r\n                    placeholder=\"О себе\"\r\n                    value={description}\r\n                    minLength=\"2\"\r\n                    maxLength=\"200\"\r\n                    required/>\r\n                <span className='popup__input-error' id='job-input-error'></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nconst AddPlacePopup = (props) => {\r\n\r\n    const [place,\r\n        setPlace] = React.useState('');\r\n    const [link,\r\n        setLink] = React.useState('');\r\n\r\n    const handleChangePlace = (e) => {\r\n        e.preventDefault();\r\n        setPlace(e.target.value)\r\n    }\r\n\r\n    const handleChangeLink = (e) => {\r\n        e.preventDefault();\r\n        setLink(e.target.value)\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        props.onAddPlace({place, link});\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            title={props.title}\r\n            id={props.id}\r\n            isOpen={props.isOpen}\r\n            buttonText={props.buttonText}\r\n            isClose={props.isClose}\r\n            onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"popup__input popup__input_place\"\r\n                    id='place-input'\r\n                    name=\"place\"\r\n                    value={place}\r\n                    placeholder=\"Название\"\r\n                    onChange={handleChangePlace}\r\n                    minLength=\"1\"\r\n                    maxLength=\"30\"\r\n                    required/>\r\n                <span className='popup__input-error' id='place-input-error'></span>\r\n            </label>\r\n            <label className=\"popup__field\">\r\n                <input\r\n                    className=\"popup__input popup__input_pic\"\r\n                    id='pic-input'\r\n                    placeholder=\"Ссылка на картинку\"\r\n                    value={link}\r\n                    onChange={handleChangeLink}\r\n                    name=\"link\"\r\n                    type=\"url\"\r\n                    required/>\r\n                <span className='popup__input-error' id='pic-input-error'></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React from 'react';\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copy\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","class Api {\r\n  constructor({\r\n    url,\r\n    headers\r\n  }) {\r\n    this._url = url;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Опаньки, ошибка: ${res.status}`));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n        headers: this._headers\r\n      })\r\n      .then(res => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  setCard(place, link) {\r\n    return fetch(`${this._url}/cards`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: place,\r\n          link: link\r\n        })\r\n      })\r\n      .then((el) => {\r\n        return this._getResponseData(el)\r\n      })\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._url}/cards/${id}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then((res) => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  addLike(id) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n        method: 'PUT',\r\n        headers: this._headers,\r\n      })\r\n      .then((res) => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  unLike(id) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then((res) => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  getProfile() {\r\n    return fetch(`${this._url}/users/me`, {\r\n        headers: this._headers\r\n      })\r\n      .then((res) => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  setProfile(name, about) {\r\n    return fetch(`${this._url}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about\r\n        })\r\n      })\r\n      .then((res) => {\r\n        return this._getResponseData(res)\r\n      })\r\n  }\r\n\r\n  profileAvatar(avalink) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: avalink\r\n        })\r\n      })\r\n      .then((res) => {\r\n      return this._getResponseData(res)\r\n\r\n      })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n  headers: {\r\n    authorization: '2078e82d-f04d-4fd6-8014-7e1fe1782828',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport {api}\r\n","import React from 'react';\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport EditAvatarPopup from './EditAvatarPopup'\r\nimport EditProfilePopup from './EditProfilePopup'\r\nimport PopupWithForm from './PopupWithForm';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Footer from './Footer.js';\r\nimport '../index.css';\r\nimport {api} from '../utils/api.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext'\r\nimport {CurrentCardContext} from '../contexts/CurrentCardContext'\r\n\r\nconst App = () => {\r\n\r\n    const [isEditProfilePopupOpen,\r\n        setIsEditProfilePopupOpen] = React.useState(false);\r\n    const [isAddPlacePopupOpen,\r\n        setIsAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen,\r\n        setIsEditAvatarPopupOpen] = React.useState(false);\r\n    const [isTrashOpen,\r\n        setIsTrashOpen] = React.useState(false);\r\n    const [isSelectedCard,\r\n        setIsSelectedCard] = React.useState()\r\n    const [currentUser,\r\n        setCurrentUser] = React.useState({})\r\n    const [currentCards,\r\n        setCurrentCards] = React.useState([])\r\n\r\n    React.useEffect(() => {\r\n\r\n        Promise.all([\r\n            api.getProfile(),\r\n            api.getInitialCards()\r\n        ]).then(res => {\r\n            const [profile, card] = res\r\n            setCurrentUser(profile)\r\n            setCurrentCards(card)\r\n        }).catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }, [])\r\n\r\n    const handleCardLike = (card) => {\r\n        const isLiked = card\r\n            .likes\r\n            .some(i => i._id === currentUser._id);\r\n        if (!isLiked) {\r\n            api\r\n                .addLike(card.id)\r\n                .then((newCard) => {\r\n\r\n                    const newCards = currentCards.map((c) => c._id === card.id\r\n                        ? newCard\r\n                        : c);\r\n                    setCurrentCards(newCards);\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        } else {\r\n            api\r\n                .unLike(card.id)\r\n                .then((newCard) => {\r\n\r\n                    const newCards = currentCards.map((c) => c._id === card.id\r\n                        ? newCard\r\n                        : c);\r\n                    setCurrentCards(newCards);\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n    }\r\n\r\n    const handleDeleteCard = (card) => {\r\n\r\n        api\r\n            .deleteCard(card.id)\r\n            .then(res => {\r\n                const deletedCard = currentCards.filter(el => el._id !== card.id)\r\n                setCurrentCards(deletedCard);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    function handleEditAvatarClick() {\r\n        setIsEditAvatarPopupOpen(true)\r\n    }\r\n\r\n    function handleEditProfileClick() {\r\n        setIsEditProfilePopupOpen(true)\r\n    }\r\n\r\n    function handleAddPlaceClick() {\r\n        setIsAddPlacePopupOpen(true)\r\n    }\r\n\r\n    function handleTrashClick() {\r\n        setIsTrashOpen(true)\r\n    }\r\n\r\n    const handleCardClick = (card) => {\r\n        setIsSelectedCard(card)\r\n    }\r\n\r\n    function closeAllPopups() {\r\n        setIsAddPlacePopupOpen(false)\r\n        setIsEditProfilePopupOpen(false)\r\n        setIsEditAvatarPopupOpen(false)\r\n        setIsTrashOpen(false)\r\n        setIsSelectedCard()\r\n    }\r\n\r\n    function handleUpdateUser({name, about}) {\r\n        api\r\n            .setProfile(name, about)\r\n            .then(res => {\r\n                setCurrentUser(res)\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    const handleUpdateAvatar = ({avatar}) => {\r\n        api\r\n            .profileAvatar(avatar)\r\n            .then(res => {\r\n                setCurrentUser(res)\r\n                closeAllPopups();\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    const handleAddPlaceSubmit = ({place, link}) => {\r\n        api\r\n            .setCard(place, link)\r\n            .then(res => {\r\n                setCurrentCards([\r\n                    res, ...currentCards\r\n                ])\r\n                closeAllPopups();\r\n            })\r\n        \r\n    }\r\n\r\n    return (\r\n        <CurrentCardContext.Provider value={currentCards}>\r\n            <CurrentUserContext.Provider value={currentUser}>\r\n                <div className=\"page\">\r\n                    <Header/>\r\n                    <Main\r\n                        onCardLike={handleCardLike}\r\n                        onEditProfile={handleEditProfileClick}\r\n                        onAddPlace={handleAddPlaceClick}\r\n                        onTrash={handleTrashClick}\r\n                        onEditAvatar={handleEditAvatarClick}\r\n                        onClose={closeAllPopups}\r\n                        card={isSelectedCard}\r\n                        onCardClick={handleCardClick}\r\n                        onCardDelete={handleDeleteCard}/>\r\n                    <EditProfilePopup\r\n                        title=\"Редактировать профиль\"\r\n                        id=\"profile\"\r\n                        isOpen={isEditProfilePopupOpen}\r\n                        buttonText={'Сохранить'}\r\n                        isClose={closeAllPopups}\r\n                        onUpdateUser={handleUpdateUser}/>\r\n                    <AddPlacePopup\r\n                        title=\"Новое место\"\r\n                        id=\"add-card\"\r\n                        isOpen={isAddPlacePopupOpen}\r\n                        buttonText={'Сохранить'}\r\n                        isClose={closeAllPopups}\r\n                        onAddPlace={handleAddPlaceSubmit}/>\r\n\r\n                    <EditAvatarPopup\r\n                        title=\"Обновить аватар\"\r\n                        id=\"new-avatar\"\r\n                        buttonText={'Обновить'}\r\n                        isOpen={isEditAvatarPopupOpen}\r\n                        isClose={closeAllPopups}\r\n                        onUpdateAvatar={handleUpdateAvatar}/>\r\n\r\n                    <PopupWithForm\r\n                        title=\"Вы уверены?\"\r\n                        id=\"remove-card\"\r\n                        buttonText={'Удалить'}\r\n                        isOpen={isTrashOpen}\r\n                        isClose={closeAllPopups}/>\r\n\r\n                    <Footer/>\r\n                </div>\r\n            </CurrentUserContext.Provider>\r\n        </CurrentCardContext.Provider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.querySelector('#root')\r\n);\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";"],"sourceRoot":""}